import java.awt.event.MouseEvent;

import IonEngine.*;
import java.awt.*;
import java.awt.event.*;

public class Main {
    public static void main(String[] args)
    {
        IonFrame frame = new IonFrame();
        frame.setVisible(true);
        frame.setTitle("Paint, but bad");
        
        IonPanel panel = frame.addPanel();
        IonContainer canvas = panel.addContainer(new IonContainer(500, 500, 0, 0), "canvas");
        canvas.changeBorder(1);
        IonRectangleObject brush = (IonRectangleObject)canvas.add(new IonRectangleObject(10, 10, 0, 0, 10), "brush");
        brush.setProperty("brushSize", 10);
        canvas.addBehaviour(new BrushBP(brush, canvas));
        
        
        frame.addMenuBar();
        Menu brushSizeMenu =  frame.addMenu("Brush size");
        
        MenuItem size1 = new MenuItem("1");
        size1.addActionListener(new brushSizeListener(brush, 1));
        brushSizeMenu.add(size1);

        MenuItem size5 = new MenuItem("5");
        size5.addActionListener(new brushSizeListener(brush, 5));
        brushSizeMenu.add(size5);

        MenuItem size10 = new MenuItem("10");
        size10.addActionListener(new brushSizeListener(brush, 10));
        brushSizeMenu.add(size10);

        MenuItem size15 = new MenuItem("15");
        size15.addActionListener(new brushSizeListener(brush, 15));
        brushSizeMenu.add(size15);

        MenuItem size20 = new MenuItem("20");
        size20.addActionListener(new brushSizeListener(brush, 20));
        brushSizeMenu.add(size20);
    }
}
class brushSizeListener implements ActionListener{
    private int size = 1;
    private IonRectangleObject brush;
    public brushSizeListener(IonRectangleObject brush, int size) {this.size = size; this.brush = brush;}
    public void actionPerformed(ActionEvent e) {
        brush.setProperty("brushSize", size);
        brush.resize(size, size);
    }
}

class BrushBP extends IonBehaviourPack {
    private IonRectangleObject brush;
    private IonContainer canvas;
    private static int dots = 0;
    public BrushBP(IonRectangleObject brush, IonContainer canvas) {this.brush = brush; this.canvas = canvas;}

    public void mouseEvent(MouseEvent e, String type, int x, int y) {
        switch(type) {
            case "moved":
                brush.moveTo(x, y);
                break;

            case "dragged":
                brush.moveTo(x, y);
                int brushSize = (int)brush.getProperty("brushSize");
                canvas.add(new IonRectangleObject(brushSize, brushSize, x, y, 0), ("dot" + dots));
                dots++;
                break;
        }
    }
}